<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>{% block title %}{% endblock title %} Moko.Car</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8" />

        <link
        href="{{ url_for('static', filename='css/bootstrap.css') }}"
        rel="stylesheet"
        type="text/css"
        />
        <!-- bootstrap css -->
        <link
        href="{{ url_for('static', filename='css/style.css') }}"
        rel="stylesheet"
        type="text/css"
        />
            <!-- Icons Css -->
        <link href="{{ url_for('static', filename='assets/css/icons.min.css') }}" rel="stylesheet" type="text/css" />
        <!-- custom css -->
        <link
        href="{{ url_for('static', filename='css/font-awesome.min.css') }}"
        rel="stylesheet"
        />
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

        <!-- fontawesome css -->
        <!-- //css files -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-alerts@1.2.2/bootstrap-alerts.min.js"></script>
        <link
        href="{{ url_for('static', filename='css/css_slider.css') }}"
        type="text/css"
        rel="stylesheet"
        media="all"
        />

        <!-- google fonts -->
        <link
        href="//fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900"
        rel="stylesheet"
        />
        <link
        href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i"
        rel="stylesheet"
        />
        <!-- //google fonts -->

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

        {% block style %}{% endblock style %}
    </head>
    <body style="width:100%;min-height:100vh;display:flex;flex-direction:column">
        <!-- header -->
        <header>
            <div class="container">
                <!-- nav -->
                <nav class="py-md-4 py-3 d-lg-flex" style="z-index: 1;">
                <div id="logo">
                    <h1>
                    <a href="{{ url_for('baseabonne') }}"
                        >Moko<span style="color: #da9d40">.</span>Car</a
                    >
                    </h1>
                </div>
                <label for="drop" class="toggle"
                    ><span class="fa fa-bars"></span
                ></label>
                <input type="checkbox" id="drop" />
                <ul class="menu mt-lg-3 ml-auto">
                    <li class="{% if baseabonne %}active{% endif %}">
                    <a href="{{ url_for('baseabonne') }}">Accueil</a>
                    </li>
                    {% if current_user.is_authenticated %}
                        <li class="dropdown">
                        <a
                            class="dropdown-toggle"
                            href="#"
                            id="servicesDropdown"
                            role="button"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                        >
                            Services
                        </a>
                        <ul
                            class="dropdown-menu s-menu"
                            aria-labelledby="servicesDropdown"
                        >
                            <a
                            class="dropdown-item"
                            href="{{ url_for('page_verifier') }}"
                            >Réserver un voyage</a
                            >
                            <a
                            class="dropdown-item"
                            href="{{ url_for('afficher_voyages') }}"
                                >Liste des voyages</a
                            >
                            <a
                            class="dropdown-item"
                            href="{{ url_for('historique_voyages_client', client_id=current_user.id ) }}"
                                >Mes Historiques voyages</a
                            >
                        </ul>
                        </li>
                    {% else %}
                        <li class="{% if apropos %}active{% endif %}"><a href="{{ url_for('apropos') }}">À propos</a></li>
                        <li class="{% if page_verifier %}active{% endif %}"><a href="{{ url_for('page_verifier') }}">Services</a></li>
                    {% endif %}
                        <li class="mr-2 {% if contact %}active{% endif %}"><a href="{{ url_for('contact') }}">Contact</a></li>
                    {% if current_user.is_authenticated %}
                        <li class="{% if deconnexion %}active{% endif %}">
                            <a class="" href="{{ url_for('deconnexion') }}">Déconnexion</a>
                        </li>
                        <li class="">
                            <span style="color: #da9d40;">Bienvenue, {{ current_user.username | upper }} !</span>
                        </li>
                    {% else %} 
                        <li style="color:#da9d40">||</li>
                        <li class="{% if connexion %}active{% endif %}"><a href="{{ url_for('connexion') }}">Connexion</a></li>
                    {% endif %}
                </ul>
                </nav>

                <!-- //nav -->
            </div>
        </header>
        <!-- //header -->

        <main class="" style="flex-grow:1">{% block content %}{% endblock %}</main>

        <!-- footer -->
        <footer class="footerv4-w3ls py-sm-5 py-4">
        <div class="footerv4-top">
            <div class="container">
            <div class="row">
                <div class="col-md-6 footer-left">
                <h3>Contactez-nous</h3>
                </div>
                <!-- footer nav links -->
                <div class="col-md-6 footer-nav-wthree my-md-3 mt-3">
                <ul class="footer-link mt-3">
                    <li>
                    <a href="{{ url_for('baseabonne') }}">Accueil</a>
                    </li>
                    <li>
                    <a href="{{ url_for('apropos') }}">À propos</a>
                    </li>
                    <li>
                    <a href="{{ url_for('service') }}">Services</a>
                    </li>
                    <li>
                    <a href="{{ url_for('contact') }}">Contact</a>
                    </li>
                </ul>
                </div>
                <!-- //footer nav links -->
            </div>
            </div>
        </div>
        </footer>
        <!-- //footer -->

        <!-- copyright -->
        <div class="copy-right text-center">
        <p>
            © 2023 Moko<span style="color: #da9d40">.</span>Car. Tous droits
            réservés | creer <i class="mdi mdi-heart text-danger"></i> par
            <a href="https://github.com/konanmoise/"> Moko&Co.</a>
        </p>
        </div>
        <!-- //copyright -->

        <!-- move top icon -->
        <a href="#home" class="move-top text-center"></a>
        <!-- //move top icon -->

        <script>
        addEventListener(
            "load",
            function () {
            setTimeout(hideURLbar, 0);
            },
            false
        );

        function hideURLbar() {
            window.scrollTo(0, 1);
        }

        // Fonction pour afficher les messages d'alerte
        function showAlert(message, category) {
            var alertDiv = document.createElement("div");
            alertDiv.className = "alert alert-" + category;
            alertDiv.innerHTML =
            "<p style='font-weight: normal;z-index:100000'>" + message + "</p>";

            var mainContent = document.querySelector("main");
            mainContent.insertBefore(alertDiv, mainContent.firstChild);

            // Fermer automatiquement l'alerte après 5 secondes
            setTimeout(function () {
            alertDiv.remove();
            }, 5000);
        }
        </script>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %} 
                {% for category, message in messages %}
                    <script>
                        showAlert("{{ message }}", "{{ category }}");
                    </script>
                {% endfor %} 
            {% endif %} 
        {% endwith %}
    </body>
</html>
